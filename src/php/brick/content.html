<!--[*]
[script]brick_content.php[/script]
[bkvar=editor]
	<img id="mod-sitemap-fasteditor" onclick="showSitemapPageEditor({v#pageid}); return false;" style="cursor: pointer;" src="{C#ASSETS}/images/edit.gif" alt="{#brick.content.1}" title="{#brick.content.1}"/>
	<img id="mod-sitemap-loading" style="display: none;" src="{C#ASSETS:R}/images/loading.gif" alt="{#brick.content.2}" />
	
	<script>
		var gel = function(n){ return document.getElementById(n); },
			elb = gel('mod-sitemap-fasteditor'),
			ell = gel('mod-sitemap-loading');
		
		var showSitemapPageEditor = function(pageid){
			elb.style.display = 'none';
			ell.style.display = '';
			
			Brick.ff('sitemap', 'editor', function(){
				var NS = Brick.mod.sitemap;
				NS.initManager(function(man){
					man.pageLoad(pageid, function(page){
						elb.style.display = '';
						ell.style.display = 'none';
						
						new NS.PageEditorPanel(page, {
							'onSave': function(){
				   				Brick.Page.reload();
							}
						});
					});
				});
			});
		};
		/*
		YAHOO.util.Event.onDOMReady(function () {
			YAHOO.util.Event.addListener('mod-sitemap-fasteditor', 'click', function(){
		   		Brick.Component.API.fire('sitemap', 'editor', 'showPageEditorPanelObj', {
		   			pageid: {v#pageid}, withmenu: {v#withmenu}, menuid: {v#menuid},
		   			savecallback: function(){
		   				Brick.Page.reload();
		   			}
		   		});
			});
	    });
	    /**/
	</script>
[/bkvar]

[bkvar=pagenotfound]
	<h1>Error 404</h1>
	<p>Page not found</p>
[/bkvar]

[*]-->
